# Wegent Configuration
# Copy this file to .env and customize as needed
# Usage: cp .env.example .env
#
# This file is used by both docker-compose.yml and start.sh (local development)

# =============================================================================
# COMMON CONFIGURATION (used by both docker-compose and start.sh)
# =============================================================================

# WebSocket URL for frontend to connect to backend
# - Local development: http://localhost:8000
# - Server deployment: http://<your-server-ip>:8000 or http://your-domain.com:8000
# Note: This is the address that browsers will use to connect, not internal docker network
# For remote access, use your machine's IP address instead of localhost
WEGENT_SOCKET_URL=http://localhost:8000

# Frontend port (default: 3000)
WEGENT_FRONTEND_PORT=3000

# Executor Docker image
EXECUTOR_IMAGE=ghcr.io/wecode-ai/wegent-executor:latest

# =============================================================================
# SERVICE COMMUNICATION (for start.sh local development)
# =============================================================================
# These URLs configure how services communicate with each other in local dev mode
# For docker-compose, these are overridden with container names (e.g., http://backend:8000)

# TASK_API_DOMAIN: URL for executor_manager to call backend
# In local dev, this should use your machine's IP (not localhost) so docker containers can access it
# Example: http://192.168.1.100:8000
# TASK_API_DOMAIN=http://YOUR_LOCAL_IP:8000

# EXECUTOR_MANAGER_URL: URL for backend/chat_shell to call executor_manager
# In local dev, this is typically http://localhost:8001
# EXECUTOR_MANAGER_URL=http://localhost:8001

# =============================================================================
# MYSQL
# =============================================================================

# MySQL root password (IMPORTANT: Change this in production!)
MYSQL_ROOT_PASSWORD=123456

# MySQL database name
MYSQL_DATABASE=task_manager

# MySQL user and password
MYSQL_USER=task_user
MYSQL_PASSWORD=task_password

# MySQL port (default: 3306)
# MYSQL_PORT=3306

# =============================================================================
# REDIS
# =============================================================================

# Redis port (default: 6379)
# REDIS_PORT=6379

# =============================================================================
# ELASTICSEARCH (RAG feature)
# =============================================================================

# Elasticsearch port (default: 9200)
# ES_PORT=9200

# Elasticsearch Java memory options
# ES_JAVA_OPTS=-Xms1g -Xmx1g

# =============================================================================
# BACKEND
# =============================================================================

# Backend port (default: 8000)
# Used by both docker-compose and start.sh
BACKEND_PORT=8000

# Environment mode
# BACKEND_ENVIRONMENT=development

# Secret key for JWT token signing (IMPORTANT: Change this in production!)
# BACKEND_SECRET_KEY=your-secret-key-here

# JWT algorithm
# BACKEND_ALGORITHM=HS256

# Access token expiration in minutes (default: 10080 = 7 days)
# BACKEND_ACCESS_TOKEN_EXPIRE_MINUTES=10080

# Task expiration settings (hours)
# BACKEND_APPEND_CHAT_TASK_EXPIRE_HOURS=2
# BACKEND_APPEND_CODE_TASK_EXPIRE_HOURS=2
# BACKEND_CHAT_TASK_EXECUTOR_DELETE_AFTER_HOURS=2
# BACKEND_CODE_TASK_EXECUTOR_DELETE_AFTER_HOURS=2

# File upload limits
# BACKEND_MAX_UPLOAD_FILE_SIZE_MB=50
# BACKEND_MAX_EXTRACTED_TEXT_LENGTH=1000000

# Initialize built-in data on startup
# BACKEND_INIT_DATA_ENABLED=True
# =============================================================================
# CHAT SHELL
# =============================================================================

# Chat Shell port (default: 8100)
# Used by both docker-compose and start.sh
CHAT_SHELL_PORT=8100

# =============================================================================
# EXECUTOR MANAGER
# =============================================================================

# Executor Manager port (default: 8001)
# Used by both docker-compose and start.sh
EXECUTOR_MANAGER_PORT=8001

# Maximum concurrent tasks
# EXECUTOR_MAX_CONCURRENT_TASKS=30

# Executor port range
# EXECUTOR_PORT_RANGE_MIN=10001
# EXECUTOR_PORT_RANGE_MAX=10100

# Executor workspace directory
# EXECUTOR_WORKSPACE=${HOME}/wecode-bot

# Timezone
# TZ=Asia/Shanghai

# =============================================================================
# MCP (Model Context Protocol)
# =============================================================================

# MCP server configs support ${{path}} variable substitution for dynamic values
# Example: "headers": {"X-User": "${{user.name}}"} will be replaced with actual username
# Available variables: user.name, user.id
# See CHAT_MCP_SERVERS in backend/app/core/config.py for full configuration format
